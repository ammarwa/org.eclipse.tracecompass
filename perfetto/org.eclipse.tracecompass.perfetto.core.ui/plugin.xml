<?xml version="1.0" encoding="UTF-8"?>
<!--
   Copyright (c) 2013 Ericsson.

   All rights reserved. This program and the accompanying materials
   are made available under the terms of the Eclipse Public License 2.0
   which accompanies this distribution, and is available at
   https://www.eclipse.org/legal/epl-2.0/

   SPDX-License-Identifier: EPL-2.0
-->
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="org.eclipse.tracecompass.internal.perfetto.ui.views.PerfettoPerspectiveFactory"
            icon="icons/obj16/perfetto_icon16.png"
            id="org.eclipse.linuxtools.perfetto.perspective"
            name="%perspective.name">
      </perspective>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            description="%commands.project.trace.selectexecutable.description"
            id="org.eclipse.linuxtools.perfetto.ui.command.project.trace.selectexecutable"
            name="%commands.project.trace.selectexecutable">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <command
               commandId="org.eclipse.linuxtools.perfetto.ui.command.project.trace.selectexecutable"
               label="%commands.project.trace.selectexecutable"
               style="push"
               tooltip="%commands.project.trace.selectexecutable.description">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <test
                           property="org.eclipse.linuxtools.tmf.ui.traceType"
                           value="org.eclipse.linuxtools.perfetto.ui.type.perfetto">
                     </test>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.eclipse.tracecompass.internal.perfetto.ui.views.project.handlers.SelectTraceExecutableHandler"
            commandId="org.eclipse.linuxtools.perfetto.ui.command.project.trace.selectexecutable">
         <activeWhen>
            <iterate
                  ifEmpty="false"
                  operator="and">
               <instanceof
                     value="org.eclipse.tracecompass.tmf.ui.project.model.TmfTraceElement">
               </instanceof>
            </iterate>
         </activeWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.navigatorContent">
      <commonWizard
            associatedExtensionId="org.eclipse.linuxtools.tmf.ui.navigator.content"
            menuGroupId="org.eclipse.linuxtools.tmf.ui.views.ui.wizards.menuGroupId"
            type="new"
            wizardId="org.eclipse.linuxtools.tmf.ui.views.ui.wizards.newProject">
         <enablement>
            <with variable="activeWorkbenchWindow.activePerspective">
               <equals
                     value="org.eclipse.linuxtools.perfetto.perspective">
               </equals>
            </with>
         </enablement>
      </commonWizard>
   </extension>
   <extension
         point="org.eclipse.linuxtools.tmf.ui.tracetypeui">
      <type
            icon="icons/obj16/perfetto_icon16.png"
            tracetype="org.eclipse.linuxtools.perfetto.ui.type.perfetto">
         <eventsTableType
               class="org.eclipse.tracecompass.internal.perfetto.ui.views.events.PerfettoEventsTable">
         </eventsTableType>
         <perspective
               id="org.eclipse.tracecompass.perfetto.ui.perspective">
         </perspective>
      </type>
   </extension>

</plugin>
